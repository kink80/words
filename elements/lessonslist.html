<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">

<polymer-element name="menu-lessonlist" >
  <template>
    <core-ajax id="lessonsajax" url="../json/lessonlist.json" handleAs="json" auto response="{{resp}}"></core-ajax>
    <core-ajax id="wordsajax" handleAs="json" auto on-core-response="{{ajaxResponse}}"></core-ajax> 
    
    <core-menu class='menu' on-core-select="{{selectAction}}">
    <template repeat="{{lesson in resp.lessons}}">
      <paper-item url="./json/{{lesson.url}}" label="{{lesson.name}}">{{lesson.name}}</paper-item>
    </template>
    </core-menu>
  </template>
  <script>
    Polymer({
      ready: function() {
      },
      selectAction: function(e, detail) {
        if (detail.isSelected) {
          this.$.wordsajax.url = detail.item.getAttribute('url');
        }
      },
      ajaxResponse: function(e, detail) {
        var wordsElem = document.querySelector("pages-words");
        if ( wordsElem ) {
          wordsElem.words = detail.response.words;
        }
      }
    });
  </script>
</polymer-element>